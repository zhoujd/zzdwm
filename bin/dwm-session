#!/bin/bash

log=$HOME/.dwm-errors
kind=run

opt=(
    "VBoxClient-all &"
)

spawn() {
    for i in "${opt[@]}"; do
        app=$(echo $i | awk '{print $1}')
        if [ -n "$(which $app)" ]; then
            echo "$(date) dwm: spawn $app."
            eval $i >/dev/null 2>&1
        fi
    done
}

run() {
    echo "$(date) dwm: start dwm on run mode." >$log
    echo "$(date) dwm: start applications." >>$log
    spawn >>$log 2>&1
    exec dwm >/dev/null 2>&1
}

debug() {
    echo "$(date) dwm: start dwm on debug mode." >$log
    echo "$(date) dwm: start applications." >>$log
    spawn >>$log 2>&1
    exec dwm >>$log 2>&1
}

case $kind in
    run|-r )
        run
        ;;
    debug|-d )
        debug
        ;;
esac
