#!/bin/bash
# Monocle windows

maximize() {
    local desktop=$(xdotool get_desktop)
    local windows=($(wmctrl -xl 2>/dev/null | grep -E "\s+${desktop}\s+" | \
                         tr -s '[:blank:]' |  awk '{print $1}'))
    for win in ${windows[@]}; do
        wmctrl -ir $win -b add,maximized_vert,maximized_horz
    done
}

float() {
    local desktop=$(xdotool get_desktop)
    local windows=($(wmctrl -xl 2>/dev/null | grep -E "\s+${desktop}\s+" | \
                         tr -s '[:blank:]' |  awk '{print $1}'))
    for win in ${windows[@]}; do
        wmctrl -ir $win -b remove,maximized_vert,maximized_horz
    done
}

main() {
    local kind=$1
    case $kind in
        m )
            maximize
            ;;
        f )
            float
            ;;
        * )
            echo "$(basename $0) {m|f}"
            ;;
    esac
}

main $@
