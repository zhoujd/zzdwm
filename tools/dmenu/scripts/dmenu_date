#!/bin/bash

mktime() {
    ZONE=$(date +'%Z')
    # If Sunday, show the week number of the next week
    if [ $(date +'%u') -gt 6 ]; then
        WEEK=$(date +'W%-V' -d "next Mon")
    else
        WEEK=$(date +'W%-V')
    fi
    TIME=$(date +'%a %-e %b %-l:%M %p %Y')
    echo "${ZONE} - ${WEEK} ${TIME}"
}

OPT=(
    -l 10
    -p date:
)

cat <<EOF | dmenu ${OPT[@]}
$(TZ="Asia/Shanghai" mktime)
$(TZ="UTC" mktime)
$(TZ="America/Los_Angeles" mktime)
EOF
