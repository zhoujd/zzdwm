#!/bin/bash

# A simple logout dialog

menu=(
    "Cancel"      # 0
    "Logout"      # 1
    "Reload"      # 2
    "Shutdown"    # 3
    "Reboot"      # 4
    "Lock"        # 5
    "Off-screen"  # 6
)

sudorun() {
    password=$(echo -n | dmenu -P -p "[sudo] password for $USER:")
    echo "$password" | sudo -S $*
}

choice=$(printf '%s\n' "${menu[@]}" | dmenu -i -ix -l 10 -p Operation)
case $choice in
    0 ) exit ;;
    1 ) xdotool key super+shift+q ;;
    2 ) xdotool key super+shift+control+q ;;
    3 ) sudorun shutdown -h now ;;
    4 ) sudorun reboot ;;
    5 ) slock ;;
    6 ) xset dpms force off ;;
esac
